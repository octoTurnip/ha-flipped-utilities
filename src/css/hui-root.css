/* x hui-root.css */
/* Make non subview headers transparent */
/* .header:not(:has(ha-icon-button-arrow-prev ~ .main-title)) {
	background-color: transparent;
	pointer-events: none;
} */

/* Make subview headers match background until scrolled */
/* .header:has(ha-icon-button-arrow-prev ~ .main-title) {
	background-color: var(--md-sys-color-surface);
	transition: background-color var(--md-sys-motion-expressive-effects-fast);
}
:host([scrolled]) .header:has(ha-icon-button-arrow-prev ~ .main-title) {
	background-color: var(--md-sys-color-surface-container);
} */

/* Hide single tab view dashboard title */
ha-menu-button + .main-title {
	display: none;
}

/* Subview title font */
.main-title {
	font-size: var(--md-sys-typescale-title-large-size);
	font-weight: var(--md-sys-typescale-title-large-weight);
	line-height: var(--md-sys-typescale-title-large-line-height);
	letter-spacing: var(--md-sys-typescale-title-large-tracking);
}

/* --------------------
 * Move menu and action items buttons to header
 * User different color for header trailing icons
 * Reduce size of header buttons but increase margin and gap to keep same placement
 */
.main-title,
.action-items,
ha-menu-button,
ha-icon-button-arrow-prev[slot='navigationIcon'] {
	pointer-events: all;
	z-index: 1;
}
ha-menu-button,
.action-items {
	margin: 0 12px;
}
.action-items {
	position: absolute;
	inset-inline-end: -4px;
	gap: 4px;
	color: var(--app-header-edit-text-color);
}

/* Add background to header buttons on scroll */
ha-menu-button,
ha-button-menu,
ha-tooltip ha-icon-button,
ha-icon-button-arrow-prev {
	border-radius: var(--md-sys-shape-corner-full);
	transition:
		background var(--md-sys-motion-expressive-effects-default),
		color var(--md-sys-motion-expressive-effects-default);

	--mdc-icon-button-size: 40px;
}
ha-button-menu,
ha-tooltip ha-icon-button,
ha-icon-button-arrow-prev {
	display: flex;
	justify-content: center;
	width: 32px;
	margin: 0 4px;
}
/* :host([scrolled]) ha-menu-button {
	background: var(--md-sys-color-surface-container);
} */
:host([scrolled]) ha-menu-button,
:host([scrolled]) ha-button-menu,
:host([scrolled]) ha-tooltip ha-icon-button,
:host([scrolled]) ha-icon-button-arrow-prev {
	/* Come back to this! it effects edit mode as well */
	background: var(--md-sys-color-surface-container);
	/* color: var(--md-sys-color-surface-container); */
	box-shadow: var(--ha-card-box-shadow);
}

/* Remove background from subview header buttons on scroll */
/* :host([scrolled])
	ha-icon-button-arrow-prev
	~ .main-title
	~ .action-items
	ha-button-menu,
:host([scrolled])
	ha-icon-button-arrow-prev
	~ .main-title
	~ .action-items
	ha-tooltip
	ha-icon-button {
	background: unset;
	color: var(--md-sys-color-on-surface-variant);
} */

/* Remove toolbar padding */
.toolbar {
	padding: 0;
}

/* Force hide subview tab just in case */
.hide-tab {
	display: none;
}

/* Turn view tabs into a separate footer, fix rail transition gap */
:not(.edit-tab-bar) > sl-tab-group {
	width: calc(100vw - var(--mdc-drawer-width, 0px) - 80px);
	margin: 0;
	margin-inline: 0;
	pointer-events: all;
	/* padding-inline-start: 148px; */
	padding-inline-start: 40px;
	/* translate: -118px 0; */
	@media (width > 870px) or (orientation: landscape) {
		width: calc(100vw - var(--mdc-drawer-width, 0px) - 256px);
		padding-inline-start: 123px;
	}
}
/* sl-tab-group:dir(rtl) {
	translate: 128px 0;
} */
/* .edit-tab-bar, */
.toolbar > sl-tab-group {
	position: fixed;
	top: 0;
	bottom: unset;
	height: var(--header-height);
	/* background: var(--navbar-background); */
	/* box-shadow: var(--md-sys-elevation-level2); */
	padding-bottom: env(safe-area-inset-bottom);
	pointer-events: all;
}
/* revert changes in edit-mode ----------*/
.edit-tab-bar {
	width: 100%;
	padding-inline-start: 0px;
}

/* Option to hide navigation bar when not in edit mode */
/* :not(.edit-tab-bar) > sl-tab-group {
	display: var(--navbar-display, initial);
} */

/* Make tabs full width */
sl-tab-group::part(tabs) {
	justify-content: space-evenly;
}

/* Display view tab contents vertically and calculate width to fill entire toolbar */
sl-tab {
	display: flex;
	padding: 3px 0;
	flex-direction: column;
	flex: 1;
	gap: 4px;
	height: var(--header-height);
	box-sizing: border-box;
	min-width: 56px;
	max-width: 174px;
	cursor: pointer;
	overflow: hidden;
	-webkit-tap-highlight-color: transparent;
}

/* Remove tab padding, icon justify center, and remove tap highlight color */
sl-tab::part(base) {
	justify-content: center;
	padding: 0px;
	-webkit-tap-highlight-color: transparent;
}

/* Add background and color current view icon -----*/
sl-tab ha-icon::before {
	content: '';
	position: absolute;
	height: 32px;
	width: 56px;
	border-radius: var(--md-sys-shape-corner-full);
	background: var(--md-sys-color-secondary-container);
	transition: transform var(--md-sys-motion-expressive-spatial-fast);
	transform: scaleX(0);
}
sl-tab[active] ha-icon::before {
	transform: scaleX(1);
}
sl-tab[active] ha-icon {
	color: var(--md-sys-color-on-secondary-container);
}

/* Prevent edit mode icon from shrinking on small width displays */
ha-svg-icon {
	min-width: 24px;
}

/* Reduce height of edit mode view icons */
sl-tab[active] .edit-icon.view {
	align-items: center;
	height: 32px;
	z-index: 1;
}

/* View icon display centering and inactive color -----*/
ha-icon {
	height: 32px;
	width: 56px;
	display: inline-flex;
	justify-content: center;
	align-items: center;
	z-index: 1;
	color: var(--md-sys-color-on-surface-variant);
}

/* View icon state layers -----*/
sl-tab ha-icon::after {
	content: '';
	position: absolute;
	height: 32px;
	width: 56px;
	border-radius: var(--md-sys-shape-corner-full);
	z-index: 0;
	background: var(--md-sys-color-on-secondary-container);
	opacity: 0;
	transition: opacity var(--md-sys-motion-expressive-effects-default);
}
@media (hover: hover) {
	sl-tab:hover ha-icon::after {
		opacity: 0.08;
	}
}
sl-tab:focus-visible ha-icon::after,
sl-tab:active ha-icon::after {
	opacity: 0.18;
}

/* Tabs with no icon */
sl-tab:not(:has(ha-icon))::part(base) {
	color: transparent;
	line-height: 32px;
}

/* View label -----*/
sl-tab::after {
	content: attr(aria-label);
	text-transform: none;
	text-wrap: wrap;
	text-align: center;
	margin: 0 auto;
	font-weight: var(--md-ref-typeface-weight-medium);
	font-size: var(--md-sys-typescale-label-medium-size);
	line-height: var(--md-sys-typescale-label-medium-line-height);
	letter-spacing: var(--md-sys-typescale-label-small-tracking);
	/* overflow: hidden; */
	height: 100%;
	color: var(--md-sys-color-on-surface-variant);
	display: flex;
	align-items: flex-start;
	z-index: 1;
}
/* ----------------------------------------------------- */
/* Current view label color */
sl-tab[active]::after {
	color: var(--md-sys-color-secondary);
}

/* Make edit mode current view tab fit all buttons ----------*/
/* .edit-mode sl-tab[active] {
	min-width: fit-content;
} */

/* Move edit mode action items back to header ---------*/
/* .edit-mode .action-items {
	position: static;
} */

/* Style add view button to look like a FAB */
/* .edit-mode:has(hui-sections-view) {
	--add-view-fab-bottom: 16px;
}
#add-view {
	position: fixed;
	bottom: calc(
		var(--add-view-fab-bottom, 84px) +
			var(--kiosk-header-height, var(--footer-height)) +
			env(safe-area-inset-bottom)
	);
	inset-inline-end: calc(16px + env(safe-area-inset-right));
	border-radius: var(--md-sys-shape-corner-large);
	background-color: var(--md-sys-color-primary-container);
	color: var(--md-sys-color-on-primary-container);
	height: 56px;
	width: 56px;
	justify-content: center;
	overflow: hidden;
	box-shadow: var(--mdc-fab-box-shadow);

	--mdc-icon-button-size: 64px;
} */

/* Restore main title margin in edit mode */
.edit-mode .main-title {
	display: flex;
	align-items: center;
	margin: 0 24px;
}

/* Fix edit mode menu link color */
.menu-link {
	color: var(--app-header-edit-text-color);
	-webkit-tap-highlight-color: transparent;
}

/* Add bottom footer padding when present */
/* div:has(sl-tab-group) {
	--footer-offset: calc(
		var(--kiosk-header-height, var(--footer-height)) +
			env(safe-area-inset-bottom)
	);
}
.header:has(sl-tab-group) + #view {
	padding-bottom: var(--footer-offset);
} */

/* Fix edit mode view top padding */
.edit-mode #view {
	padding-top: calc(var(--header-height) + env(safe-area-inset-top));
}

/* Header Cards pointer events fix */
/* #headerCards {
	pointer-events: all;
} */

/* Large displays alternate navigation bar */
/* @media (width > 870px) or (orientation: landscape) { */
/* Center view tabs */
/* sl-tab-group::part(tabs) {
		justify-content: center;
	} */

/* Show original label of view tab with no icon */
/* sl-tab:not(:has(ha-icon))::part(base) {
		color: unset;
	} */

/* Move label to right of icon and ensure that it can contain content */
/* sl-tab::part(base) {
		justify-content: flex-start;
		align-self: center;
		width: fit-content;
	}
	sl-tab {
		min-width: fit-content;
		justify-content: center;
	}
	.edit-mode sl-tab[active]::after {
		translate: -120px 0;
	} */

/* Remove vertical label */
/* sl-tab::after {
		content: unset;
	} */

/* Position and size of edit view icons */
/* .edit-icon.view {
		padding: 0;
	} */

/* Position icon on left of indicator */
/* sl-tab ha-icon {
		justify-content: flex-start;
		width: 100%;
		position: relative;
		inset-inline-start: 20px;
	} */

/* Horizontal label, indicator, and state layers */
/* sl-tab ha-icon::before,
	sl-tab ha-icon::after {
		content: attr(title);
		display: flex;
		align-items: center;
		font-weight: var(--md-ref-typeface-weight-medium);
		font-size: var(--md-sys-typescale-label-medium-size);
		line-height: var(--md-sys-typescale-label-medium-line-height);
		letter-spacing: var(--md-sys-typescale-label-small-tracking);
		height: 40px;
		width: fit-content;
		margin-inline-start: -16px;
		padding-inline-start: 44px;
		padding-inline-end: 16px;
		z-index: 0;
	}
	sl-tab:not([aria-label]) ha-icon::before,
	sl-tab:not([aria-label]) ha-icon::after {
		margin-inline-start: -18px;
	}
	sl-tab ha-icon::before {
		color: transparent;
	}
	sl-tab ha-icon::after {
		position: relative;
		inset-inline-start: -24px;
		color: var(--md-sys-color-on-surface-variant);
		background: rgba(
			from var(--md-sys-color-on-secondary-container) r g b /
				var(--state-layer-opacity)
		);
		opacity: 1;
		transition: background var(--md-sys-motion-expressive-effects-default);

		--state-layer-opacity: 0;
	}
	sl-tab[active] ha-icon::after {
		color: var(--md-sys-color-secondary);
	}
	@media (hover: hover) {
		sl-tab:hover ha-icon::after {
			--state-layer-opacity: 0.08;
			opacity: 1;
		}
	}
	sl-tab:focus-visible ha-icon::after,
	sl-tab:active ha-icon::after {
		--state-layer-opacity: 0.18;
		opacity: 1;
	} */

/* Fix edit mode horizontal item current item position */
/* .edit-mode sl-tab ha-icon {
		position: relative;
		inset-inline-start: 20px;
	} */
/* } */
